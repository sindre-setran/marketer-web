"use client";

import { motion, useTransform, cubicBezier, MotionValue } from "motion/react";

export type FlyingElementVariant = "shopify" | "google" | "meta" | "snapchat";

interface FlyingElementProps {
  scrollYProgress: MotionValue<number>;
  startX?: number;
  startY?: number;
  startRotate?: number;
  variant: FlyingElementVariant;
}

const variants = {
  shopify: {
    color: "#F5FCE8",
    component: (
      <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M52.9912 12.5688C52.9471 12.2488 52.6668 12.0717 52.4351 12.0522C52.2039 12.0329 47.3101 11.6702 47.3101 11.6702C47.3101 11.6702 43.9113 8.29593 43.5382 7.92245C43.165 7.54919 42.436 7.66272 42.153 7.74601C42.1114 7.75829 41.4104 7.97461 40.251 8.33341C39.1157 5.06634 37.1119 2.06404 33.5869 2.06404C33.4896 2.06404 33.3894 2.06798 33.2892 2.07368C32.2867 0.747875 31.0449 0.171875 29.9722 0.171875C21.7607 0.171875 17.8376 10.4371 16.6076 15.6535C13.4168 16.6422 11.1501 17.3451 10.8605 17.4361C9.07948 17.9948 9.02315 18.0509 8.78929 19.7291C8.61329 20.9997 3.95312 57.0389 3.95312 57.0389L40.2661 63.8427L59.9417 59.5862C59.9417 59.5862 53.0346 12.8888 52.9912 12.5688ZM38.244 8.95412L35.1713 9.90514C35.1724 9.68859 35.1735 9.47555 35.1735 9.24256C35.1735 7.21209 34.8916 5.57724 34.4395 4.28124C36.2558 4.50919 37.4655 6.57582 38.244 8.95412ZM32.1863 4.68387C32.6913 5.94919 33.0196 7.76508 33.0196 10.2155C33.0196 10.3409 33.0186 10.4555 33.0175 10.5714C31.0192 11.1904 28.8478 11.8624 26.6716 12.5366C27.8935 7.82075 30.1839 5.54305 32.1863 4.68387ZM29.7467 2.3744C30.1011 2.3744 30.4581 2.49472 30.7998 2.7299C28.1681 3.96826 25.3473 7.08716 24.1561 13.3155L19.14 14.8691C20.5353 10.1184 23.8486 2.3744 29.7467 2.3744Z" fill="#95BF46"/>
        <path d="M52.4377 12.053C52.2065 12.0337 47.3127 11.671 47.3127 11.671C47.3127 11.671 43.9139 8.29673 43.5409 7.92325C43.4012 7.78429 43.213 7.71306 43.0162 7.68237L40.2705 63.843L59.9444 59.587C59.9444 59.587 53.0372 12.8896 52.9938 12.5696C52.9497 12.2496 52.6694 12.0725 52.4377 12.053Z" fill="#5E8E3E"/>
        <path d="M33.5877 22.9247L31.1616 30.1413C31.1616 30.1413 29.036 29.0069 26.4304 29.0069C22.6106 29.0069 22.4184 31.404 22.4184 32.0081C22.4184 35.3041 31.0102 36.567 31.0102 44.2873C31.0102 50.3614 27.1577 54.2726 21.9631 54.2726C15.7297 54.2726 12.542 50.3932 12.542 50.3932L14.211 44.8786C14.211 44.8786 17.4877 47.6918 20.2527 47.6918C22.0594 47.6918 22.7943 46.2693 22.7943 45.23C22.7943 40.9306 15.7455 40.7388 15.7455 33.674C15.7455 27.728 20.0133 21.9739 28.6283 21.9739C31.9478 21.9739 33.5877 22.9247 33.5877 22.9247Z" fill="white"/>
      </svg>
    ),
  },
  google: {
    color: "#E8FCEE",
    component: (
      <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M23.4821 14.1362C23.9976 12.7831 24.7064 11.5373 25.7588 10.5278C29.9687 6.42534 36.9278 7.45632 39.7845 12.6112C41.9324 16.5204 44.2091 20.3436 46.4214 24.2098C50.1158 30.6319 53.8531 37.0541 57.5045 43.4977C60.5759 48.8889 57.2467 55.6977 51.1467 56.6213C47.4094 57.1797 43.9084 55.4614 41.9753 52.1107C38.732 46.4618 35.4672 40.8129 32.2239 35.1854C32.1595 35.0566 32.0736 34.9492 31.9877 34.8418C31.644 34.5625 31.4937 34.1544 31.2789 33.7893C29.8398 31.2548 28.3578 28.7418 26.9187 26.2288C25.9951 24.5964 25.0285 22.9855 24.105 21.3531C23.2673 19.8925 22.8807 18.3031 22.9236 16.6278C22.9881 15.7686 23.0955 14.9095 23.4821 14.1362Z" fill="#4285F4"/>
        <path d="M23.4826 14.1357C23.2893 14.909 23.1175 15.6822 23.0746 16.4984C23.0101 18.3026 23.4612 19.978 24.3633 21.5459C26.7259 25.6054 29.0886 29.6864 31.4298 33.7673C31.6446 34.1325 31.8164 34.4976 32.0312 34.8413C30.7425 37.0751 29.4537 39.2874 28.1435 41.5212C26.3393 44.6356 24.5351 47.7715 22.7094 50.8859C22.6235 50.8859 22.602 50.843 22.5805 50.7785C22.5591 50.6067 22.6235 50.4564 22.6665 50.2845C23.5471 47.0627 22.8168 44.206 20.6045 41.7574C19.2513 40.2754 17.533 39.4377 15.557 39.1585C12.9795 38.7934 10.7028 39.4592 8.66229 41.0701C8.29715 41.3494 8.06088 41.7574 7.63131 41.9722C7.54539 41.9722 7.50244 41.9293 7.48096 41.8648C8.51194 40.0821 9.52144 38.2994 10.5524 36.5166C14.8052 29.1279 19.058 21.7392 23.3323 14.372C23.3753 14.2861 23.4397 14.2217 23.4826 14.1357Z" fill="#FBBC05"/>
        <path d="M7.56681 41.9298C7.97491 41.5647 8.36153 41.178 8.7911 40.8344C14.0104 36.7105 21.8502 39.696 22.9886 46.2256C23.2678 47.7935 23.1175 49.297 22.6449 50.8005C22.6234 50.9294 22.602 51.0368 22.559 51.1657C22.3657 51.5093 22.1939 51.8745 21.9791 52.2181C20.0675 55.3755 17.2537 56.9435 13.5594 56.7072C9.32807 56.4065 5.99886 53.2276 5.41894 49.0178C5.13971 46.9773 5.54781 45.0657 6.60027 43.3044C6.81506 42.9178 7.0728 42.5742 7.30907 42.1875C7.41646 42.1016 7.3735 41.9298 7.56681 41.9298Z" fill="#34A853"/>
        <path d="M7.56675 41.9292C7.48084 42.0151 7.48084 42.1654 7.33049 42.1869C7.30901 42.0366 7.39492 41.9507 7.48084 41.8433L7.56675 41.9292Z" fill="#FBBC05"/>
        <path d="M22.559 51.1652C22.4731 51.0148 22.559 50.9074 22.6449 50.8C22.6664 50.8215 22.7094 50.8645 22.7309 50.886L22.559 51.1652Z" fill="#FBBC05"/>
      </svg>
    ),
  },
  meta: {
    color: "#E8F1FC",
    component: (
      <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M62.6663 39.1467L59.7423 41.3641L56.8263 39.3334C56.8263 39.1201 56.8263 38.8934 56.813 38.6667C56.813 38.4534 56.813 38.2267 56.7997 38.0001C56.613 32.7467 55.2797 27.1201 52.613 23.0001C50.5597 19.8401 47.933 18.3334 44.9997 18.3334C41.9197 18.3334 39.413 20.1734 36.6397 24.1734C36.5597 24.2934 36.4663 24.4134 36.3863 24.5467C36.333 24.6134 36.293 24.6801 36.2397 24.7601C36.1063 24.9601 35.973 25.1601 35.8397 25.3734C34.6397 27.2401 33.3863 29.4134 32.0263 31.8134C31.9063 32.0401 31.773 32.2668 31.653 32.4934C31.613 32.5467 31.573 32.6134 31.5463 32.6667L31.2663 33.1601L29.613 36.0801C25.733 42.9467 24.7463 44.5201 22.813 47.0934C19.413 51.6134 16.5063 53.3334 12.6797 53.3334C8.14634 53.3334 5.26634 51.3734 3.49301 48.4134C2.03967 46.0134 1.33301 42.8534 1.33301 39.2534L7.95967 39.4801C7.95967 41.8267 8.46634 43.6134 9.14634 44.7067C10.0263 46.1201 11.3197 46.6667 12.6663 46.6667C14.3863 46.6667 15.9863 46.3067 19.0263 42.0934C21.4663 38.7201 24.3463 34.0001 26.2797 31.0267L28.1063 28.2401L28.493 27.6267L28.893 27.0267L29.5597 26.0001C30.573 24.4534 31.6663 22.8134 32.8397 21.2401C32.973 21.0534 33.1063 20.8667 33.253 20.6801C33.3863 20.4934 33.533 20.3067 33.6663 20.1334C34.8663 18.6001 36.133 17.1734 37.493 16.0001C39.9597 13.8534 42.613 12.6667 45.293 12.6667C49.7863 12.6667 54.0663 15.2667 57.3463 20.1467C60.693 25.1334 62.4397 31.3468 62.6397 37.8134C62.653 38.0268 62.653 38.2534 62.653 38.4801C62.6663 38.7067 62.6663 38.9201 62.6663 39.1467Z" fill="#0081FB"/>
        <path d="M6.55664 20.6081C9.59264 15.9347 13.9766 12.6667 19.0033 12.6667C21.9153 12.6667 24.8086 13.5267 27.8313 15.9907C31.1366 18.6841 34.6606 23.1187 39.0566 30.4281L40.6326 33.0507C44.438 39.3787 46.602 42.6334 47.87 44.1694C49.4993 46.1414 50.5166 46.6667 51.9993 46.6667C55.7593 46.6667 56.822 43.2801 56.822 39.3321L62.666 39.1494C62.666 43.2761 61.8513 46.3081 60.4646 48.7028C59.126 51.0187 56.5153 53.3334 52.1233 53.3334C49.3926 53.3334 46.974 52.7414 44.2993 50.2227C42.2433 48.2894 39.8393 44.8547 37.99 41.7681L32.4886 32.5961C29.7286 27.9934 27.1966 24.5601 25.7313 23.0067C24.1553 21.3347 22.2086 19.3347 18.9753 19.3347C16.358 19.3347 14.0566 21.1507 12.1966 23.9547L6.55664 20.6081Z" fill="url(#paint0_linear_5551_21971)"/>
        <path d="M18.9997 19.3334C16.3877 19.3334 14.089 21.1494 12.233 23.9534C9.60767 27.9161 7.99967 33.8174 7.99967 39.4854C7.99967 41.8227 7.99567 43.5814 8.66634 44.6667L3.54634 48.4174C2.09834 46.0094 1.33301 42.9334 1.33301 39.3334C1.33301 32.7867 3.13967 25.8787 6.55701 20.6081C9.58901 15.9347 14.009 12.6667 19.0263 12.6667L18.9997 19.3334Z" fill="url(#paint1_linear_5551_21971)"/>
        <path opacity="0.05" d="M28.8912 27.0287L28.4912 27.6287L28.1045 28.242C29.0512 29.6154 30.1312 31.2687 31.2645 33.162L31.5445 32.6687C31.5712 32.6154 31.6112 32.5487 31.6512 32.4954C31.7712 32.2687 31.9045 32.042 32.0245 31.8154C30.9178 30.002 29.8512 28.3887 28.8912 27.0287ZM33.2512 20.682C33.1045 20.8687 32.9712 21.0554 32.8378 21.242C33.8112 22.4554 34.7978 23.8287 35.8378 25.3754C35.9712 25.162 36.1045 24.962 36.2378 24.762C36.2912 24.682 36.3312 24.6154 36.3845 24.5487C36.4645 24.4154 36.5578 24.2954 36.6378 24.1754C35.6245 22.682 34.6378 21.3354 33.6645 20.1354C33.5312 20.3087 33.3845 20.4954 33.2512 20.682Z" fill="#171717"/>
        <path opacity="0.07" d="M28.8941 27.029L28.4941 27.629C29.4408 28.989 30.5075 30.6157 31.6541 32.4957C31.7741 32.269 31.9075 32.0424 32.0275 31.8157C30.9208 30.0024 29.8541 28.389 28.8941 27.029ZM32.8408 21.2424C33.8141 22.4557 34.8008 23.829 35.8408 25.3757C35.9741 25.1624 36.1075 24.9624 36.2408 24.7624C35.2141 23.2424 34.2141 21.8824 33.2541 20.6824C33.1075 20.869 32.9741 21.0557 32.8408 21.2424Z" fill="#171717"/>
        <defs>
        <linearGradient id="paint0_linear_5551_21971" x1="56.4046" y1="33.0001" x2="18.0433" y2="33.0001" gradientUnits="userSpaceOnUse">
        <stop stopColor="#0081FB"/>
        <stop offset="0.995" stopColor="#0064E1"/>
        </linearGradient>
        <linearGradient id="paint1_linear_5551_21971" x1="10.1797" y1="43.8267" x2="10.1797" y2="17.3494" gradientUnits="userSpaceOnUse">
        <stop stopColor="#0081FB"/>
        <stop offset="0.995" stopColor="#0064E1"/>
        </linearGradient>
        </defs>
      </svg>
    )
  },
  snapchat: {
    color: "#FFFECC",
    component: (
      <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M55.641 44.7636C47.1071 40.6325 45.7469 34.2543 45.6864 33.7812C45.6132 33.2081 45.5301 32.7576 46.1623 32.1747C46.772 31.6115 49.4767 29.9373 50.2272 29.4136C51.4676 28.5462 52.014 27.6803 51.6113 26.6159C51.3297 25.8795 50.644 25.6021 49.9217 25.6021C49.6938 25.6028 49.4667 25.6283 49.2444 25.6781C47.8815 25.9738 46.558 26.6567 45.792 26.8412C45.7 26.8649 45.6054 26.8776 45.5104 26.8792C45.1021 26.8792 44.9472 26.6975 44.9866 26.2061C45.0824 24.7165 45.2851 21.809 45.05 19.0929C44.7276 15.3561 43.5223 13.5046 42.0932 11.8671C41.4019 11.073 38.1916 7.66138 31.9964 7.66138C25.8012 7.66138 22.5952 11.073 21.9081 11.8572C20.4748 13.4947 19.2709 15.3462 18.9513 19.0831C18.7162 21.7991 18.9274 24.7052 19.0147 26.1963C19.0428 26.6637 18.8992 26.8693 18.4909 26.8693C18.3959 26.8677 18.3013 26.8549 18.2093 26.8313C17.4447 26.6469 16.1212 25.964 14.7583 25.6683C14.536 25.6185 14.3089 25.593 14.081 25.5923C13.3559 25.5923 12.673 25.8739 12.3914 26.606C11.9887 27.6705 12.5322 28.5364 13.7769 29.4037C14.5274 29.9275 17.2321 31.6002 17.8418 32.1648C18.4726 32.7477 18.3909 33.1983 18.3177 33.7713C18.2572 34.2515 16.8956 40.6297 8.36314 44.7537C7.8633 44.9959 7.01286 45.5084 8.51238 46.3363C10.8666 47.6373 12.4337 47.4979 13.6516 48.2822C14.6851 48.9482 14.074 50.3843 14.8259 50.9025C15.7495 51.5403 18.4796 50.8574 22.0067 52.0218C24.9635 52.9962 26.7601 55.7488 32.0035 55.7488C37.2468 55.7488 39.0956 52.9835 42.0003 52.0218C45.5203 50.8574 48.256 51.5403 49.1811 50.9025C49.9315 50.3843 49.3219 48.9482 50.3553 48.2822C51.5732 47.4979 53.1389 47.6373 55.4945 46.3363C56.9912 45.5183 56.1408 45.0058 55.641 44.7636Z" fill="white"/>
        <path d="M59.3591 44.2857C58.9761 43.2437 58.2468 42.6862 57.4161 42.2243C57.2598 42.1328 57.1162 42.0596 56.9937 42.0033C56.7458 41.8752 56.4924 41.7513 56.2404 41.6203C53.6511 40.2475 51.6292 38.5157 50.2268 36.4628C49.8286 35.8849 49.4831 35.2723 49.1947 34.6324C49.0751 34.2903 49.0807 34.096 49.1666 33.9185C49.2518 33.7819 49.3645 33.6644 49.4975 33.5736C49.9424 33.2793 50.4014 32.9808 50.7126 32.7795C51.2673 32.4204 51.7066 32.136 51.9896 31.9347C53.0527 31.1913 53.7961 30.4014 54.2607 29.5185C54.5849 28.9086 54.774 28.236 54.815 27.5465C54.8561 26.857 54.7482 26.1667 54.4987 25.5226C53.7947 23.6697 52.0445 22.5194 49.9241 22.5194C49.4768 22.519 49.0308 22.5662 48.5935 22.6602C48.4767 22.6855 48.3598 22.7123 48.2458 22.7418C48.2655 21.4746 48.2373 20.137 48.1247 18.8206C47.7248 14.1925 46.1042 11.7665 44.4146 9.83189C43.3326 8.61959 42.0582 7.59396 40.6426 6.79625C38.0786 5.33193 35.1711 4.5885 32.0017 4.5885C28.8322 4.5885 25.9388 5.33193 23.372 6.79625C21.9529 7.5942 20.6759 8.62189 19.593 9.83752C17.9034 11.7721 16.2827 14.2023 15.8829 18.8262C15.7702 20.1427 15.7421 21.4873 15.7604 22.7475C15.6463 22.7179 15.5309 22.6912 15.414 22.6658C14.9767 22.5718 14.5307 22.5246 14.0834 22.525C11.9616 22.525 10.2086 23.6753 9.50745 25.5283C9.25682 26.1726 9.14784 26.8634 9.18793 27.5536C9.22802 28.2439 9.41623 28.9174 9.73977 29.5284C10.2058 30.4112 10.9492 31.2011 12.0123 31.9445C12.2939 32.1417 12.7346 32.4261 13.2893 32.7893C13.5892 32.9836 14.0271 33.2681 14.4566 33.5525C14.6068 33.6496 14.7345 33.7778 14.8311 33.9284C14.9212 34.1129 14.924 34.3114 14.7903 34.6775C14.5058 35.3039 14.166 35.9037 13.7751 36.4698C12.4037 38.4762 10.441 40.1771 7.93471 41.5386C6.60697 42.2426 5.22713 42.7129 4.64422 44.2969C4.20492 45.4923 4.49215 46.8524 5.6087 47.9985C6.01848 48.4263 6.49376 48.7861 7.0167 49.0644C8.10479 49.6624 9.2618 50.1253 10.4621 50.4428C10.7098 50.5067 10.9449 50.6119 11.1576 50.754C11.5645 51.1102 11.5068 51.6467 12.0489 52.4323C12.321 52.8384 12.6668 53.1899 13.0683 53.4686C14.2059 54.2543 15.4844 54.3036 16.8389 54.3557C18.0625 54.4021 19.4493 54.4556 21.0333 54.978C21.6895 55.1948 22.3709 55.6144 23.1608 56.1044C25.0574 57.2702 27.6538 58.8655 31.9988 58.8655C36.3439 58.8655 38.9586 57.2618 40.8692 56.0917C41.6535 55.6102 42.3307 55.1948 42.9686 54.9836C44.5526 54.4599 45.9394 54.4078 47.163 54.3613C48.5175 54.3092 49.796 54.2599 50.9336 53.4743C51.4091 53.1427 51.8054 52.7099 52.0938 52.2071C52.4838 51.5439 52.474 51.0807 52.8401 50.7568C53.0396 50.6215 53.2604 50.5206 53.4934 50.4583C54.71 50.1398 55.8828 49.6726 56.9852 49.0672C57.5408 48.7692 58.0409 48.3776 58.4636 47.9098L58.4777 47.8929C59.5252 46.7722 59.7885 45.4515 59.3591 44.2857ZM55.497 46.361C53.1414 47.662 51.5757 47.5226 50.3578 48.3069C49.3229 48.9729 49.9354 50.409 49.1835 50.9272C48.2598 51.565 45.5297 50.8821 42.0027 52.0465C39.0938 53.0082 37.238 55.7735 32.0059 55.7735C26.7738 55.7735 24.9617 53.0138 22.0049 52.0395C18.4849 50.8751 15.7491 51.558 14.8241 50.9201C14.0736 50.402 14.6833 48.9658 13.6498 48.2999C12.4305 47.5156 10.8648 47.655 8.51059 46.361C7.01107 45.5331 7.8615 45.0206 8.36134 44.7785C16.8938 40.6474 18.2554 34.2691 18.3159 33.7961C18.3891 33.223 18.4708 32.7724 17.84 32.1895C17.2303 31.6263 14.5256 29.9522 13.7751 29.4284C12.5332 28.5611 11.9869 27.6952 12.3896 26.6307C12.6712 25.8944 13.3583 25.617 14.0792 25.617C14.3071 25.6177 14.5342 25.6432 14.7565 25.693C16.1194 25.9887 17.4429 26.6716 18.2075 26.856C18.2995 26.8796 18.3941 26.8924 18.4891 26.894C18.8974 26.894 19.041 26.6885 19.0129 26.221C18.9256 24.7299 18.7144 21.8238 18.9495 19.1078C19.2719 15.371 20.4758 13.5194 21.9063 11.8819C22.5934 11.0949 25.8219 7.68329 31.996 7.68329C38.1701 7.68329 41.4071 11.0808 42.0942 11.865C43.5261 13.5025 44.7314 15.3541 45.051 19.0909C45.2861 21.8069 45.0834 24.7145 44.9876 26.2041C44.9553 26.6955 45.1031 26.8771 45.5114 26.8771C45.6065 26.8756 45.701 26.8629 45.793 26.8391C46.559 26.6547 47.8825 25.9718 49.2454 25.6761C49.4678 25.6263 49.6948 25.6008 49.9227 25.6001C50.6478 25.6001 51.3307 25.8817 51.6123 26.6138C52.015 27.6783 51.4715 28.5442 50.2282 29.4115C49.4778 29.9353 46.773 31.608 46.1633 32.1726C45.5311 32.7555 45.6142 33.2061 45.6874 33.7792C45.748 34.2593 47.1081 40.6375 55.642 44.7616C56.146 45.0136 56.9965 45.5261 55.497 46.361Z" fill="black"/>
      </svg>
    )
  }
};

export function FlyingElement({
  scrollYProgress,
  startX = 150,
  startY = -300,
  startRotate = 45,
  variant,
}: FlyingElementProps) {
  const x = useTransform(scrollYProgress, [0, 0.55], [startX, 0], {
    ease: cubicBezier(0.32, 0.72, 0, 1),
  });
  const y = useTransform(scrollYProgress, [0, 0.55], [startY, 0], {
    ease: cubicBezier(0.32, 0.72, 0, 1),
  });
  const rotate = useTransform(scrollYProgress, [0, 0.55], [startRotate, 0], {
    ease: cubicBezier(0.32, 0.72, 0, 1),
  });
  const opacity = useTransform(scrollYProgress, [0.35, 0.55], [1, 0]);
  const filter = useTransform(scrollYProgress, [0.35, 0.55], ["blur(0px)", "blur(8px)"]);

  const transform = useTransform(
    [x, y, rotate],
    ([latestX, latestY, latestRotate]) =>
      `translate3d(${latestX}px, ${latestY}px, 0) rotate(${latestRotate}deg)`
  );

  const { color, component } = variants[variant as keyof typeof variants];

  return (
    <div className="absolute left-1/2 top-1/2 z-10">
      <motion.div
        style={{ transform, opacity, filter }}
        className="size-32 p-8 -ml-16 -mt-16 rounded-4xl transition-all duration-500 ease-out"
        initial={{ backgroundColor: color }}
        animate={{ backgroundColor: color }}
      >
        {component}
      </motion.div>
    </div>
  );
}
